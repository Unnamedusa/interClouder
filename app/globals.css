/* interClouder v6.0 — Global Styles */
/* Full accessibility: focus-visible, high contrast, reduced motion, screen reader */

/* ── Theme Variables ── */
:root, [data-theme="dark"] {
  --bg: #0d0a14; --bg2: #13101c; --bg3: #1a1525; --bg4: #211c2e;
  --bga: #2a2240; --bgh: #1e1830; --bdr: #2a243a;
  --tx: #e8e0f0; --tx2: #b8b0c8; --txm: #8a82a0; --txg: #4a4460;
  --acc: #A855F7; --acl: #C084FC;
  --ok: #22C55E; --wrn: #FBBF24; --err: #EF4444; --inf: #818CF8; --pk: #F472B6;
  --focus: #A855F7;
  --font: 'Space Grotesk', system-ui, -apple-system, sans-serif;
  --mono: 'JetBrains Mono', 'Fira Code', 'Consolas', monospace;
}
[data-theme="midnight"] {
  --bg: #0a0e1a; --bg2: #0f1425; --bg3: #141930; --bg4: #1a2040;
  --bga: #202848; --bgh: #161c35; --bdr: #1e2545; --acc: #6366F1; --acl: #818CF8;
}
[data-theme="void"] {
  --bg: #000; --bg2: #0a0a0a; --bg3: #111; --bg4: #1a1a1a;
  --bga: #222; --bgh: #151515; --bdr: #1e1e1e;
}
[data-theme="light"] {
  --bg: #f5f3f7; --bg2: #edeaf2; --bg3: #e5e2ea; --bg4: #dddae5;
  --bga: #d5d0e0; --bgh: #e8e5ef; --bdr: #d0cce0;
  --tx: #1a1525; --tx2: #3a3450; --txm: #5a5470; --txg: #9a94a0;
  --acc: #7C3AED; --acl: #6D28D9;
}
[data-theme="high-contrast"] {
  --bg: #000; --bg2: #0a0a0a; --bg3: #111; --bg4: #1a1a1a;
  --bga: #333; --bgh: #222; --bdr: #555;
  --tx: #fff; --tx2: #eee; --txm: #ccc; --txg: #999;
  --acc: #FFD700; --acl: #FFE55C;
  --ok: #00FF00; --wrn: #FFFF00; --err: #FF4444; --inf: #8888FF;
  --focus: #FFD700;
}

/* ── Reset & Base ── */
*, *::before, *::after { margin: 0; padding: 0; box-sizing: border-box; }

html {
  font-size: 14px;
  scroll-behavior: smooth;
}

body {
  font-family: var(--font);
  background: var(--bg);
  color: var(--tx);
  overflow: hidden;
  height: 100vh;
  line-height: 1.5;
  -webkit-font-smoothing: antialiased;
}

/* ── Accessibility: Focus Styles ── */
:focus-visible {
  outline: 2px solid var(--focus);
  outline-offset: 2px;
  border-radius: 4px;
}

:focus:not(:focus-visible) {
  outline: none;
}

/* Skip navigation link */
.skip-link {
  position: absolute;
  top: -100%;
  left: 16px;
  padding: 8px 16px;
  background: var(--acc);
  color: #fff;
  border-radius: 0 0 8px 8px;
  font-weight: 700;
  font-size: 13px;
  z-index: 10000;
  text-decoration: none;
  transition: top 0.2s;
}
.skip-link:focus {
  top: 0;
}

/* Screen reader only utility */
.sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border-width: 0;
}

/* ── Reduced Motion ── */
@media (prefers-reduced-motion: reduce) {
  *, *::before, *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
  }
}

[data-reduced-motion="true"] * {
  animation-duration: 0.01ms !important;
  transition-duration: 0.01ms !important;
}

/* ── Scrollbar ── */
::-webkit-scrollbar { width: 6px; }
::-webkit-scrollbar-track { background: transparent; }
::-webkit-scrollbar-thumb { background: var(--bdr); border-radius: 3px; }
::-webkit-scrollbar-thumb:hover { background: var(--txg); }

/* ── Forms ── */
input, select, textarea, button { font-family: inherit; }

/* ── Layout ── */
.app { display: flex; height: 100vh; width: 100vw; }

.sbar {
  width: 66px; background: var(--bg);
  display: flex; flex-direction: column; align-items: center;
  padding: 8px 0; gap: 4px;
  border-right: 1px solid var(--bdr);
  overflow-y: auto; flex-shrink: 0;
}

.si {
  width: 44px; height: 44px; border-radius: 22px;
  display: flex; align-items: center; justify-content: center;
  cursor: pointer; transition: all 0.2s;
  font-size: 15px; color: var(--txm);
  background: var(--bg3); border: 1px solid var(--bdr);
  position: relative; flex-shrink: 0;
}
.si:hover, .si:focus-visible { border-radius: 14px; background: var(--bga); }
.si[aria-selected="true"], .si.on {
  border-radius: 14px;
  background: linear-gradient(135deg, var(--acc), #7C3AED);
  color: #fff; border-color: transparent;
}
.si .ind {
  position: absolute; left: -11px; width: 4px; height: 18px;
  background: var(--tx); border-radius: 0 3px 3px 0;
}

.side {
  width: 228px; background: var(--bg2);
  display: flex; flex-direction: column;
  border-right: 1px solid var(--bdr); flex-shrink: 0;
}

.main {
  flex: 1; display: flex; flex-direction: column;
  background: var(--bg3); min-width: 0;
}

/* ── Channel List ── */
.ch {
  padding: 5px 8px; border-radius: 7px;
  display: flex; align-items: center; justify-content: space-between;
  cursor: pointer; margin: 1px 0; transition: all 0.12s;
  font-size: 13px; color: var(--txm);
  border: 1px solid transparent;
}
.ch:hover, .ch:focus-visible { background: var(--bgh); color: var(--tx2); }
.ch[aria-selected="true"], .ch.on { background: var(--bga); color: var(--acl); border-color: var(--bdr); }

.sl {
  font-size: 9px; text-transform: uppercase;
  letter-spacing: 1.2px; color: var(--txg);
  font-weight: 700; padding: 10px 8px 4px;
}

/* ── Messages ── */
.msg {
  display: flex; gap: 10px; padding: 4px 16px;
  transition: background 0.08s;
}
.msg:hover { background: var(--bgh); }

.mp {
  width: 200px; background: var(--bg2);
  border-left: 1px solid var(--bdr);
  padding: 8px; overflow-y: auto; flex-shrink: 0;
}

/* ── Input Bar ── */
.inp {
  display: flex; align-items: center; gap: 8px;
  padding: 8px 16px;
  border-top: 1px solid var(--bdr); background: var(--bg2);
}
.inp input {
  flex: 1; padding: 10px 14px; border-radius: 12px;
  background: var(--bg); border: 1px solid var(--bdr);
  color: var(--tx); font-size: 13px; outline: none;
}
.inp input:focus { border-color: var(--acc); }
.inp input::placeholder { color: var(--txg); }

/* ── Buttons ── */
.btn {
  padding: 7px 14px; border-radius: 9px;
  font-weight: 700; font-size: 12px;
  cursor: pointer; border: none; transition: all 0.15s;
  display: inline-flex; align-items: center; justify-content: center; gap: 4px;
}
.btn:disabled { opacity: 0.5; cursor: not-allowed; }
.bp {
  background: linear-gradient(135deg, var(--acc), #7C3AED);
  color: #fff;
}
.bp:hover:not(:disabled) { filter: brightness(1.1); }
.bs {
  background: var(--bg4); color: var(--tx2);
  border: 1px solid var(--bdr);
}
.bs:hover:not(:disabled) { background: var(--bga); }

/* ── Toggle ── */
.tg {
  width: 36px; height: 18px; border-radius: 9px;
  cursor: pointer; transition: all 0.2s;
  position: relative; flex-shrink: 0;
  border: none;
}
.tg[aria-checked="true"] { background: var(--acc); }
.tg[aria-checked="false"] { background: var(--bg4); border: 1px solid var(--bdr); }
.tg .k {
  width: 14px; height: 14px; border-radius: 7px;
  background: #fff; position: absolute; top: 2px; transition: left 0.2s;
}
.tg[aria-checked="true"] .k { left: 20px; }
.tg[aria-checked="false"] .k { left: 2px; }

/* ── Modal ── */
.modal {
  position: fixed; inset: 0;
  background: rgba(0,0,0,0.65);
  display: flex; align-items: center; justify-content: center;
  z-index: 100; backdrop-filter: blur(6px);
}
.mcard {
  background: var(--bg2); border: 1px solid var(--bdr);
  border-radius: 18px; max-height: 90vh; overflow-y: auto;
}

/* ── Toast / Notification ── */
.toast {
  position: fixed; top: 16px; left: 50%; transform: translateX(-50%);
  padding: 8px 18px; border-radius: 10px;
  background: var(--bg4); border: 1px solid var(--bdr);
  color: var(--tx); font-size: 12px; font-weight: 600; z-index: 200;
}
.toast[role="alert"] { /* ensures screen readers announce it */ }

/* ── Reaction ── */
.rx {
  display: inline-flex; align-items: center; gap: 3px;
  padding: 2px 5px; border-radius: 5px;
  cursor: pointer; font-size: 11px;
  border: 1px solid var(--bdr); background: var(--bg4);
}
.rx:hover, .rx:focus-visible { border-color: var(--acc); }
.rx[aria-pressed="true"] { border-color: var(--acc); background: rgba(168,85,247,0.1); }

/* ── Auth Screens ── */
.login-bg {
  min-height: 100vh; display: flex;
  align-items: center; justify-content: center;
  background: radial-gradient(ellipse at 30% 20%, #1a0830, var(--bg) 70%);
}
.age-gate {
  min-height: 100vh; display: flex;
  align-items: center; justify-content: center;
  background: radial-gradient(ellipse at 50% 30%, #1a0830, var(--bg) 70%);
}

/* ── Form Inputs ── */
.li {
  width: 100%; padding: 9px 12px; border-radius: 9px;
  background: var(--bg); border: 1px solid var(--bdr);
  color: var(--tx); font-size: 13px; outline: none;
}
.li:focus { border-color: var(--acc); }
.li::placeholder { color: var(--txg); }
.li[aria-invalid="true"] { border-color: var(--err); }

/* ── Tabs ── */
.tab {
  padding: 5px 12px; border-radius: 7px;
  cursor: pointer; font-size: 11px; font-weight: 600;
  border: none; transition: all 0.15s;
}
.tab[aria-selected="true"], .tab.on { background: var(--acc); color: #fff; }
.tab[aria-selected="false"], .tab.off { background: transparent; color: var(--txm); }
.tab[aria-selected="false"]:hover, .tab.off:hover { background: var(--bgh); }

/* ── Card ── */
.card {
  padding: 12px; border-radius: 12px;
  background: var(--bg4); border: 1px solid var(--bdr);
}

/* ── Chips & Tags ── */
.chip {
  padding: 2px 7px; border-radius: 5px;
  font-size: 9px; font-weight: 700;
  display: inline-flex; align-items: center; gap: 2px;
}
.mtag {
  padding: 1px 5px; border-radius: 4px;
  font-size: 8px; font-weight: 800;
  letter-spacing: 0.5px; text-transform: uppercase;
}

/* ── Splash Screen ── */
.splash {
  position: fixed; inset: 0;
  background: rgba(0,0,0,0.85);
  display: flex; align-items: center; justify-content: center;
  z-index: 300; backdrop-filter: blur(12px);
}
.splash-card {
  background: var(--bg2); border: 1px solid var(--acc);
  border-radius: 24px; padding: 36px; max-width: 480px; text-align: center;
}

/* ── CloudKids Filter ── */
.ck-blur { filter: blur(6px); cursor: pointer; border-radius: 3px; padding: 0 2px; }
.ck-blur:hover { filter: blur(2px); }
.ck-block { background: var(--bg4); color: var(--bg4); border-radius: 3px; cursor: pointer; padding: 0 2px; }
.ck-block:hover { color: var(--txm); }

/* ── File Attachments ── */
.file-attach {
  display: flex; align-items: center; gap: 8px;
  padding: 8px 12px; border-radius: 10px;
  background: var(--bg4); border: 1px solid var(--bdr);
  margin-top: 4px; max-width: 300px;
}

/* ── Message Actions (visible on hover/focus) ── */
.msg-actions { opacity: 0; transition: opacity 0.1s; }
.msg:hover .msg-actions,
.msg:focus-within .msg-actions,
.msg-actions:focus-within { opacity: 1; }

/* ── INEX IDE Styles ── */
.inex-editor {
  font-family: var(--mono);
  font-size: 13px;
  line-height: 1.6;
  tab-size: 2;
  background: #0a0a0a;
  color: #e8e0f0;
  border: 1px solid var(--bdr);
  border-radius: 10px;
  padding: 12px;
  resize: vertical;
  width: 100%;
  min-height: 200px;
  outline: none;
  caret-color: var(--acl);
}
.inex-editor:focus { border-color: var(--acc); }
.inex-editor::placeholder { color: var(--txg); }

.inex-output {
  font-family: var(--mono);
  font-size: 12px;
  line-height: 1.5;
  background: #050505;
  color: var(--tx2);
  border: 1px solid var(--bdr);
  border-radius: 10px;
  padding: 10px;
  max-height: 300px;
  overflow-y: auto;
}
.inex-output .log { color: var(--tx2); }
.inex-output .error { color: var(--err); }
.inex-output .action { color: var(--ok); }
.inex-output .system { color: var(--acl); }
.inex-output .debug { color: var(--txm); }
.inex-output .event { color: var(--wrn); }

/* ── Live Region for Screen Readers ── */
.live-region {
  position: absolute;
  width: 1px; height: 1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
}
